{
    "contents" : "library(\"png\")\nlibrary(\"rgenoud\")\n\nlogo = readPNG(\"homo.png\")\n\nimageSize=dim(logo)\n\nnrows = imageSize[1]\nncols = imageSize[2]\n\nNum = 4*100\n\nimageNum=0\n\nDrawImage <- function(xx, filename=\"\")\n{\n  outImageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n  len = length(xx)/4\n  summ=0\n  for (i in 1:len)\n  {\n    x1=xx[(i-1)*4+1]\n    y1=xx[(i-1)*4+2]\n    x2=xx[(i-1)*4+3]\n    y2=xx[(i-1)*4+4]\n    outImageMatrix[y1:y2,x1:x2] = 0 \n  }\n  if (filename==\"\")\n    writePNG(outImageMatrix, sprintf(\"result/%06d.png\",imageNum))\n  else\n    writePNG(outImageMatrix, sprintf(filename,imageNum))\n  imageNum <<- imageNum+1\n}\n\nf <- function(xx)\n{\n  len = length(xx)/4\n  imageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n  #summ=0\n  for (i in 1:len)\n  {\n    x1=xx[(i-1)*4+1]\n    y1=xx[(i-1)*4+2]\n    x2=xx[(i-1)*4+3]\n    y2=xx[(i-1)*4+4]\n    imageMatrix[y1:y2,x1:x2] = 0 \n    #summ=summ+sum(logo[y1:y2,x1:x2])\n  }\n  sub = imageMatrix-logo\n  sub[sub<0]<-0\n  summ = sum(sub)\n  \n  sub = logo-imageMatrix\n  sub[sub<0]<-0\n  summ = summ + sum(sub)\n  DrawImage(xx)\n  return (summ)\n}\n\ndom = c(1,ncols,1,nrows,1,ncols,1,nrows)\nm = matrix(dom,nrow=Num,ncol=2,byrow=TRUE)\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2)\n\nrectangles = res$par\n\nDrawImage(rectangles)\n\n#outImageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n#\n#len = length(rectangles)/4\n#i=0\n#for (i in 1:len)\n#{\n#  x1=rectangles[(i-1)*4+1]\n#  y1=rectangles[(i-1)*4+2]\n#  x2=rectangles[(i-1)*4+3]\n#  y2=rectangles[(i-1)*4+4]\n#  outImageMatrix[y1:y2,x1:x2] = 0 \n#}\n\n#writePNG(outImageMatrix,\"out.png\")",
    "created" : 1394356157481.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3126058656",
    "id" : "A0366599",
    "lastKnownWriteTime" : 1394963733,
    "path" : "~/R/lab2/lab2.R",
    "project_path" : "lab2.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}