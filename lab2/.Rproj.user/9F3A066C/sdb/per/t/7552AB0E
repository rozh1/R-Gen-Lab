{
    "contents" : "library(\"png\")\nlibrary(\"rgenoud\")\n\nlogo = readPNG(\"homo.png\")\n\nimageSize=dim(logo)\n\nnrows = imageSize[1]\nncols = imageSize[2]\n\nNum = 4*100\n\nimageNum=0\n\nDrawImage <- function(xx, filename=\"\")\n{\n  outImageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n  len = length(xx)/4\n  summ=0\n  for (i in 1:len)\n  {\n    x1=xx[(i-1)*4+1]\n    y1=xx[(i-1)*4+2]\n    x2=xx[(i-1)*4+3]\n    y2=xx[(i-1)*4+4]\n    outImageMatrix[y1:y2,x1:x2] = 0 \n  }\n  if (filename==\"\")\n    #writePNG(outImageMatrix, sprintf(\"result/%06d.png\",imageNum))\n  else\n    writePNG(outImageMatrix, sprintf(filename,imageNum))\n  imageNum <<- imageNum+1\n}\n\nf <- function(xx)\n{\n  len = length(xx)/4\n  imageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n  #summ=0\n  for (i in 1:len)\n  {\n    x1=xx[(i-1)*4+1]\n    y1=xx[(i-1)*4+2]\n    x2=xx[(i-1)*4+3]\n    y2=xx[(i-1)*4+4]\n    imageMatrix[y1:y2,x1:x2] = 0 \n    #summ=summ+sum(logo[y1:y2,x1:x2])\n  }\n  sub = imageMatrix-logo\n  sub[sub<0]<-0\n  summ = sum(sub)\n  \n  sub = logo-imageMatrix\n  sub[sub<0]<-0\n  summ = summ + sum(sub)\n  DrawImage(xx)\n  return (summ)\n}\n\ndom = c(1,ncols,1,nrows,1,ncols,1,nrows)\nm = matrix(dom,nrow=Num,ncol=2,byrow=TRUE)\n\n#res = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2)\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=100,P4=50,P5=20,P6=20,P7=30,P8=20,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out1\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=100,P2=0,P3=0,P4=0,P5=0,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out2\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=50,P3=0,P4=0,P5=0,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out3\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=50,P3=50,P4=0,P5=0,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out4\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=0,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out5\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=0,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out6\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=50,P6=0,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out7\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=50,P6=50,P7=0,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out8\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=50,P6=50,P7=50,P8=0,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out9\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=50,P6=50,P7=50,P8=50,P9=0)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out10\")\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=100,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=10,P3=50,P4=50,P5=50,P6=50,P7=50,P8=50,P9=50)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"result/out11\")\n\n\nres = genoud(fn=f,max.generations=100,nvars=Num,Domains=m,pop.size=10,data.type.int=TRUE,boundary.enforcement=2,P1=50,P2=0,P3=0,P4=50,P5=50,P6=50,P7=50,P8=50,P9=0,gradient.check=FALSE, BFGS=FALSE)\n\nrectangles = res$par\n\nDrawImage(rectangles,filename=\"out12.png\")\n\n#outImageMatrix=matrix(1,nrow=nrows,ncol=ncols)\n#\n#len = length(rectangles)/4\n#i=0\n#for (i in 1:len)\n#{\n#  x1=rectangles[(i-1)*4+1]\n#  y1=rectangles[(i-1)*4+2]\n#  x2=rectangles[(i-1)*4+3]\n#  y2=rectangles[(i-1)*4+4]\n#  outImageMatrix[y1:y2,x1:x2] = 0 \n#}\n\n#writePNG(outImageMatrix,\"out.png\")",
    "created" : 1393944137951.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "151540012",
    "id" : "7552AB0E",
    "lastKnownWriteTime" : 1396161828,
    "path" : "~/R/gen/lab2/lab2.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}